{{#unless isNodeTest}}
- name: Add Problem Matcher
  run: echo "::add-matcher::.github/matchers/tap.json"
{{/unless}}
{{#if isNodeTest}}
- name: Test (with coverage on Node >= 24)
  if: $\{{ startsWith(matrix.node-version, '24') }}
  run: {{ rootNpmPath }} run test:cover --ignore-scripts {{~#if jobRunFlags}} {{ jobRunFlags }}{{/if}}
- name: Test (on Node 20 with globbing workaround)
  if: $\{{ startsWith(matrix.node-version, '20') }}
  run: {{ rootNpmPath }} run test:node20 --ignore-scripts {{~#if jobRunFlags}} {{ jobRunFlags }}{{/if}}
- name: Test
  if: $\{{ !startsWith(matrix.node-version, '24') && !startsWith(matrix.node-version, '20') }}
  run: {{ rootNpmPath }} test --ignore-scripts {{~#if jobRunFlags}} {{ jobRunFlags }}{{/if}}
{{else}}
- name: Test
  run: {{ rootNpmPath }} test --ignore-scripts {{~#if jobRunFlags}} {{ jobRunFlags }}{{/if}}
{{/if}}
