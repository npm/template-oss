name: CI {{~#if isWorkspace}} - {{pkgName}}{{/if}}

on:
  {{> setupCiOn}}

jobs:
  lint:
    {{> setupJob }}
      - run: {{rootNpmPath}} run lint {{~#if isWorkspace}} -w {{pkgName}}{{/if}}

  test:
    {{> setupJobMatrix }}
      - name: add tap problem matcher
        run: echo "::add-matcher::.github/matchers/tap.json"
      - run: {{rootNpmPath}} test --ignore-scripts {{~#if isWorkspace}} -w {{pkgName}}{{/if}}
